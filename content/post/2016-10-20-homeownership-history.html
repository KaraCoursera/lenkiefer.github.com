---
title: "Visualizing the history of U.S. homeownership rates"
author: "Len Kiefer"
date: "2016-10-20"
summary: "rstats data visualizations, mortgage data"
---



<p>IN THIS POST I WANT TO LOOK AT THE HISTORY OF HOMEOWNERSHIP in the United States. I’m going to go relatively far back in time, using Census data to compare the evolution of the homeownership rate by state from 1900 through 2015. Along the way we’ll make several different visualizations.</p>
<div id="data" class="section level2">
<h2>Data</h2>
<p>For data we’re going to rely on the U.S. Census Bureau. <a href="https://www.census.gov/hhes/www/housing/census/historic/owner.html">This page</a> has a tabulation of historical homeownership rates from 1900 through 2000. Then we’ll supplement these estimates with estimates from the 2010 Decennial Census and the 2005 and 2015 American Community Survey, which can be downloaded from Census <a href="http://factfinder.census.gov/faces/nav/jsf/pages/index.xhtml">here</a>.</p>
<p>I’ve put all the data into a single long text file with columns for state, year, and the value of the homeownership rate. You can download these data in a text file <a href="%7B%7B%20site.url%20%7D%7D/img/data/horate.txt">here</a>.</p>
</div>
<div id="lets-make-some-graphs" class="section level1">
<h1>Let’s make some graphs</h1>
<p>First let’s set up some libraries and take a peek at our data.</p>
<pre class="r"><code>library(viridis)
library(data.table)
library(ggplot2)
library(scales)
library(tweenr)
library(animation)
library(dplyr)
library(viridis)
library(&quot;htmlTable&quot;)
ho.dat&lt;-fread(&quot;data/horate.txt&quot;)  #load data

# view data:
htmlTable(head(ho.dat), col.rgroup = c(&quot;none&quot;, &quot;#F7F7F7&quot;),caption=&quot;Homeownership data:&quot;,
          tfoot=&quot;horate.txt&quot;)</code></pre>
<table class='gmisc_table' style='border-collapse: collapse; margin-top: 1em; margin-bottom: 1em;' >
<thead>
<tr><td colspan='4' style='text-align: left;'>
Homeownership data:</td></tr>
<tr>
<th style='border-bottom: 1px solid grey; border-top: 2px solid grey;'> </th>
<th style='border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;'>state</th>
<th style='border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;'>year</th>
<th style='border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;'>value</th>
</tr>
</thead>
<tbody>
<tr>
<td style='text-align: left;'>1</td>
<td style='text-align: center;'>United States</td>
<td style='text-align: center;'>2010</td>
<td style='text-align: center;'>65.1</td>
</tr>
<tr style='background-color: #f7f7f7;'>
<td style='background-color: #f7f7f7; text-align: left;'>2</td>
<td style='background-color: #f7f7f7; text-align: center;'>United States</td>
<td style='background-color: #f7f7f7; text-align: center;'>2000</td>
<td style='background-color: #f7f7f7; text-align: center;'>66.2</td>
</tr>
<tr>
<td style='text-align: left;'>3</td>
<td style='text-align: center;'>United States</td>
<td style='text-align: center;'>1990</td>
<td style='text-align: center;'>64.2</td>
</tr>
<tr style='background-color: #f7f7f7;'>
<td style='background-color: #f7f7f7; text-align: left;'>4</td>
<td style='background-color: #f7f7f7; text-align: center;'>United States</td>
<td style='background-color: #f7f7f7; text-align: center;'>1980</td>
<td style='background-color: #f7f7f7; text-align: center;'>64.4</td>
</tr>
<tr>
<td style='text-align: left;'>5</td>
<td style='text-align: center;'>United States</td>
<td style='text-align: center;'>1970</td>
<td style='text-align: center;'>62.9</td>
</tr>
<tr style='background-color: #f7f7f7;'>
<td style='background-color: #f7f7f7; border-bottom: 2px solid grey; text-align: left;'>6</td>
<td style='background-color: #f7f7f7; border-bottom: 2px solid grey; text-align: center;'>United States</td>
<td style='background-color: #f7f7f7; border-bottom: 2px solid grey; text-align: center;'>1960</td>
<td style='background-color: #f7f7f7; border-bottom: 2px solid grey; text-align: center;'>61.9</td>
</tr>
</tbody>
<tfoot><tr><td colspan='4'>
horate.txt</td></tr></tfoot>
</table>
<p>Now we’ll plot the U.S. homeownership rate:</p>
<pre class="r"><code>ho.dat$st&lt;-factor(ho.dat$state,levels=unique(ho.dat$state)) #make a factor out of the state variable for use later


ggplot(data=ho.dat[state==&quot;United States&quot;,],aes(x=year,y=value))+
   geom_line(color=viridis(5)[2],size=1.05)+
   theme_minimal()+
  geom_text(data=ho.dat[state==&quot;United States&quot; &amp; year==2015,],hjust=0,aes(label=paste(&quot; &quot;,round(value,1))),color=viridis(5)[2])+
  geom_point(data=ho.dat[state==&quot;United States&quot; &amp; year==2015,],color=viridis(5)[2],size=3)+
  scale_x_continuous(breaks=unique(ho.dat$year))+
  scale_y_continuous(breaks=seq(40,70,5))+
  coord_cartesian(xlim=c(1895,2020))+
  labs(x=&quot;&quot;,y=&quot;&quot;,title=&quot;Homeownership rate (%)&quot;,
       subtitle=&quot;United States&quot;,
       caption=&quot;@lenkiefer Source: U.S. Census Bureau\n1900-2010 Decennial Census, 2005 &amp; 2015 American Community Survey 1-year estimates&quot;)+
  theme(plot.caption=element_text(hjust=0))+
  theme(axis.text=element_text(size=7))</code></pre>
<p><img src="/post/2016-10-20-homeownership-history_files/figure-html/fig-horate-1-1.png" width="720" /></p>
<p>This chart shows the decline in the homeownership rate since 2005 for the United States. At 63% the level of homeownership is the lowest in several decades. The <a href="http://www.census.gov/housing/hvs/index.html">Housing Vacancy Survey</a> has updated estimates through the second quarter of 2016 and the rate of 62.9 percent in 2016Q2 is the lowest since the start of the survey in 1965.</p>
<p>However, the longer history that we can get from the Decennial Census shows us that the homeownership rate has been much lower before the 1960s.</p>
<div id="homeownership-rates-by-state" class="section level2">
<h2>Homeownership rates by state</h2>
<p>We can also look at the rate of homeownership by state. Let’s try several different ways to examine it.</p>
<div id="panel-plot" class="section level3">
<h3>Panel plot</h3>
<p>Let’s compare the homeownership rate by state using small multiples. So we have 50 states, I’m going to drop the District of Columbia. For each state we’ll plot a line chart using the historical rates of homeownership for each state.</p>
<pre class="r"><code>ggplot(data=ho.dat[! (state %in% c(&quot;United States&quot;,&quot;District of Columbia&quot;)),],aes(x=year,y=value))+
   geom_line(color=viridis(5)[2],size=.95)+
   theme_minimal()+
  geom_text(data=ho.dat[! (state %in% c(&quot;United States&quot;,&quot;District of Columbia&quot;)) &amp; year==2015,],hjust=0,aes(label=paste(&quot; &quot;,round(value,0))),color=viridis(5)[2],size=2)+
  geom_point(data=ho.dat[! (state %in% c(&quot;United States&quot;,&quot;District of Columbia&quot;)) &amp; year==2015,],color=viridis(5)[2],size=1)+
  scale_x_continuous(breaks=c(1900,2015))+
  scale_y_continuous(breaks=seq(20,80,20))+
  coord_cartesian(xlim=c(1895,2025))+facet_wrap(~state,ncol=5)+
  labs(x=&quot;&quot;,y=&quot;&quot;,title=&quot;Homeownership rate (%)&quot;,
       subtitle=&quot;by state&quot;,
       caption=&quot;@lenkiefer Source: U.S. Census Bureau\n1900-2010 Decennial Census, 2005 &amp; 2015 American Community Survey 1-year estimates&quot;)+
  theme(plot.caption=element_text(hjust=0))+
  theme(axis.text=element_text(size=7))</code></pre>
<p><img src="/post/2016-10-20-homeownership-history_files/figure-html/fig-horate-2-1.png" width="768" /></p>
<p>The chart shows that most states follow a pattern similar to the U.S., the the rate of increase and post-2005 decline varies by state.</p>
</div>
<div id="dot-plot" class="section level3">
<h3>Dot plot</h3>
<p>An alternative to the line plot is a dot plot, which compares the level of homeownership across states at a particular point in time. For example, the graph below compares the homeownership rate in 2015 across states:</p>
<pre class="r"><code>ggplot(data=ho.dat[! (state %in% c(&quot;United States&quot;,&quot;District of Columbia&quot;)) &amp; year==2015,],aes(y=reorder(state,-value),x=value,color=value))+
  scale_color_viridis(direction=-1,end=0.9)+
   geom_point(size=3)+geom_vline(xintercept=63,color=&quot;gray&quot;,linetype=2)+
   theme_minimal()+
  annotate(geom=&quot;text&quot;,x=63,y=50,label=&quot; U.S.:63%&quot;,hjust=0)+
  theme(legend.position=&quot;none&quot;)+ #suppress color legend
   theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())+  #remove gridlines
  geom_segment(aes(xend=63,x=value,yend=reorder(state,-value)))+  #add segment from U.S. average

  geom_text(aes(label=paste(&quot; &quot;,round(value,1),&quot; &quot;),hjust=ifelse(value&gt;63,0,1)),color=viridis(5)[2],size=4)+
  scale_x_continuous(limits=c(50,75),breaks=seq(50,75,5))+
    labs(x=&quot;&quot;,y=&quot;&quot;,title=&quot;Homeownership rate (%) in 2015&quot;,
       subtitle=&quot;&quot;,
       caption=&quot;@lenkiefer Source: U.S. Census Bureau\n1900-2010 Decennial Census, 2005 &amp; 2015 American Community Survey 1-year estimates&quot;)+
  theme(plot.caption=element_text(hjust=0))+
  theme(axis.text=element_text(size=7))</code></pre>
<p><img src="/post/2016-10-20-homeownership-history_files/figure-html/fig-horate-3-1.png" width="672" /></p>
<p>The plot shows that while the U.S. homeownership rate averaged 63 percent in 2015, there’s substantial variation across states. California and New York, with large populations of renters and high housing costs have the homeownership rates below 54%. Eight states (DE, IA, ME, MI, MN, NH, VT, and WV) had a homeownership rate over 70 percent in 2015.</p>
</div>
</div>
<div id="animated-plots" class="section level2">
<h2>Animated plots</h2>
<p>We can use tweenr to create animated versions of these plots to see how homeownership rates have varied over time and across states.</p>
<div id="spaghetti-plot" class="section level3">
<h3>Spaghetti plot</h3>
<p><img src="{{ site.url }}/img/charts_oct_20_2016/ho rate by state viz.gif" alt="HO gif 1"/></p>
<p>This plot compares each state’s time series. The backgroud “spaghetti” plot is an individual line for each state. We then cycle through each state and highlight them in turn.</p>
</div>
<div id="lollipops" class="section level3">
<h3>Lollipops</h3>
<p>We can also have dancing lollipops, by animating the dot plot to cycle through each year:</p>
<p><img src="{{ site.url }}/img/charts_oct_20_2016/ho rate by state viz 2.gif" alt="Ho gif 2"/></p>
<p>This chart shows that the dispersion of homeownership rates around the U.S. average has varied quite a lot over history.</p>
</div>
</div>
<div id="animation-code" class="section level2">
<h2>Animation Code</h2>
<p>Code for the animations can be found below. I’m using the R package tweenr to make the animations.</p>
<p>See my earlier <a href="../../../../2016/05/29/improving-R-animated-gifs-with-tweenr">post about tweenr</a> for an introduction to tweenr, and more examples <a href="../../../../2016/05/30/more-tweenr-animations">here</a> and <a href="../../../../2016/06/26/week-in-review">here</a>.</p>
<pre class="r"><code>## make the time series plot

myf&lt;-function(s){as.data.frame(ho.dat[state==s, list(year,st,value)])}

# use lapply to generate the list of data sets:
my.list&lt;-lapply(c(st.list,st.list[1]),myf)

tf &lt;- tween_states(my.list, tweenlength= 2, statelength=3, ease=rep(&#39;cubic-in-out&#39;,24),
                   nframes=300)
tf&lt;-data.table(tf)
oopt = ani.options(interval = 0.1)
saveGIF({for (i in 1:max(tf$.frame)) {
  my.state&lt;-unique(tf[.frame==i]$st)
  
g&lt;-
  ggplot(data=tf[.frame==i,],aes(x=year,y=value))+
  geom_line(color=viridis(5)[2],size=1.05)+
  # faint lines for states not featured:
  geom_line(data=ho.dat,color=viridis(10)[9],size=1.05,alpha=0.1,aes(x=year,y=value,group=st))+
  geom_text(data=tf[.frame==i &amp; year==2015,],hjust=0,aes(label=paste(&quot; &quot;,round(value,1))),color=viridis(5)[2])+
  geom_point(data=tf[.frame==i &amp; year==2015,],color=viridis(5)[2],size=3)+
  theme_minimal()+
  scale_x_continuous(breaks=unique(ho.dat$year))+
  coord_cartesian(ylim=c(20,81),xlim=c(1895,2020))+  #set limites
  labs(x=&quot;&quot;,y=&quot;&quot;,title=&quot;Homeownership rate&quot;,
       subtitle=my.state,
       caption=&quot;@lenkiefer Source: U.S. Census Bureau\n1900-2010 Decennial Census, 2005 &amp; 2015 American Community Survey 1-year estimates&quot;)+
  theme(plot.caption=element_text(hjust=0))+
  theme(axis.text=element_text(size=8))
print(g)
ani.pause()
}
},movie.name=&quot;ho rate by state viz.gif&quot;,ani.width = 650, ani.height = 450)

ho.dat$yf&lt;-factor(ho.dat$year)  #create year factor for plots


### make the panel plot

myf2&lt;-function(y){as.data.frame(ho.dat[year==y, list(yf,st,value)])}

# use lapply to generate the list of data sets:
my.list2&lt;-lapply(c(2015,seq(1900,2000,10),2005,2010,2015),myf2)


tf &lt;- tween_states(my.list2, tweenlength= 2, statelength=3, ease=rep(&#39;cubic-in-out&#39;,24),
                   nframes=200)

tf&lt;-data.table(tf)


oopt = ani.options(interval = 0.1)
saveGIF({for (i in 1:max(tf$.frame)) {
  us.v&lt;-unique(tf[.frame==i &amp; st==&quot;United States&quot;]$value)

g&lt;-
  ggplot(data=tf[.frame==i &amp; !(st %in% c(&quot;United States&quot;,&quot;District of Columbia&quot;)),],aes(y=st,x=value,color=value))+
  scale_color_viridis(direction=-1,end=0.9)+
  geom_point(size=3)+
  geom_vline(xintercept=us.v,color=&quot;gray&quot;,linetype=2)+
  theme_minimal()+
  #annotate(geom=&quot;text&quot;,x=us.v,y=0,label=paste(&quot; U.S.:&quot;,us.v,&quot;%&quot;),hjust=0)+
  theme(legend.position=&quot;none&quot;)+ #suppress color legend
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank())+  #remove gridlines
  geom_segment(aes(xend=us.v,x=value,yend=st))+  #add segment from U.S. average
    geom_text(aes(label=paste(&quot; &quot;,round(value,1),&quot; &quot;),hjust=ifelse(value&gt;us.v,0,1)),color=viridis(5)[2],size=4)+
  scale_x_continuous(limits=c(25,80),breaks=seq(30,80,10))+
  labs(x=&quot;&quot;,y=&quot;&quot;,title=&quot;Homeownership rate&quot;,
       subtitle=paste0(&quot;U.S. &quot;,round(us.v,0),&quot;% in &quot;,unique(tf[.frame==i,]$yf)),
       caption=&quot;@lenkiefer Source: U.S. Census Bureau\n1900-2010 Decennial Census, 2005 &amp; 2015 American Community Survey 1-year estimates&quot;)+
  theme(plot.caption=element_text(hjust=0))+
  theme(axis.text=element_text(size=7))

print(g)
ani.pause()
print(i)
}
},movie.name=&quot;ho rate by state viz 2.gif&quot;,ani.width = 650, ani.height = 650)</code></pre>
</div>
</div>
